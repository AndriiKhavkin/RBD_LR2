# Лабораторна робота №2  
## Основи Apache Cassandra: енергетична система моніторингу (DER)  
### Дисципліна: «Проєктування систем з розподілененими базами даних в енергетиці»

---

## Мета роботи

Метою лабораторної роботи є освоєння принципів проєктування розподілених схем даних у **Apache Cassandra** на прикладі енергетичних систем моніторингу та набуття практичних навичок:
- створення keyspace та таблиць;
- роботи з часовими рядами (time-series);
- виконання аналітичних запитів через Python.

---

## Варіант

**Варіант 8Б – Distributed Energy Resources (DER)**  
Система моніторингу для малих генераторів із виконанням порівняльного аналізу двох об’єктів.

---

## Технології

- Apache Cassandra 4.1 (Docker)
- Python 3.11
- cassandra-driver
- Docker Compose

> ⚠️ Для сумісності з cassandra-driver використовується Python 3.11, оскільки Python 3.12 не підтримує asyncore.

---

## Структура даних

### Keyspace
```sql
CREATE KEYSPACE der_monitoring
WITH replication = {'class': 'SimpleStrategy', 'replication_factor': 1};
```

### Таблиці

| Таблиця | Призначення | Ключі |
|--------|------------|------|
| operational_metrics | Часові вимірювання (потужність, напруга) | PK: generator_id, CK: timestamp |
| generator_info | Довідкова інформація | PK: generator_type, CK: generator_id |
| regional_balances | Баланси по регіонах | PK: region, CK: date |
| daily_reports | Агреговані звіти | PK: date, CK: generator_id |

---

## Реалізація

Python-скрипт `lab2.py`:
- створює keyspace та таблиці;
- генерує тестові дані;
- виконує порівняльний аналіз двох генераторів;
- обчислює середню затримку вставки.

---

## Результати виконання

Після запуску скрипта автоматично створюються всі таблиці та виводяться результати аналізу.

Приклад результатів:
- Вставлено записів: **40**
- Загальний час: **~0.65 сек**
- Середня затримка: **~16 мс/запис**
- Виконано порівняльний аналіз двох генераторів за середньою потужністю

---

## Висновки

Apache Cassandra ефективно підходить для систем моніторингу енергетичних ресурсів завдяки:
- горизонтальній масштабованості;
- високій швидкості запису;
- оптимальній роботі з часовими рядами.

Проєкт підтвердив доцільність використання Cassandra для IoT та DER-систем.

---

## Запуск

```bash
docker compose up -d
python lab2.py
```

---
